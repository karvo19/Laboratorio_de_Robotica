
$l  1 I    E1V0  3
$l  2 J    E1V0  600
$l  3 I    E1V1  3
$l  4 I    E2V2  1
$l  5 I    E3P1  1
$l  6 I    E3P2  1
$l  7 I    E3V1  1
$l  8 I    E4P1  1
$l  9 I    E4P2  1
$l  10 I    E4P3  1
$l  11 I    E4P4  1
$l  12 I    E4V1  1
$v  13 CERRA 0
$v  14 POSIN 0
$v  15 NEXTP 0
$p  1  1 0 0 0 0 0 0 0
$p  2  1 P3 -1074  14320 -8184 -361  867 0
$p  3  1 P1 -3622  14320 -8196  517  1651 0
$p  4  1 P2 -5521  15005 -7248  1707  2842 0
$p  5  1 T1 -3453  12596 -12821 -385  861 0
$p  6  1 NEXT -3622  14320 -8196  517  1651 0
$p  7  1 APROX -3621  13122 -8221  515  1648 0
$p  8  1 P0 -3453  2205 -1520  577 -99 0
$p  9  1 P1A -3624  12861 -8216  513  1643 0
$p  10  1 P2A -5531  13580 -7532  1707  2839 0
$p  11  1 P3A -1075  13201 -8216 -361  864 0
$p  12  1 $%^&$  7  6025 -3822 -2 0 0
$p  13  1 POS -3624  12861 -8216  513  1643 0
$p  14  1 POS -5531  13580 -7532  1707  2839 0
$p  15  1 POS -1075  13201 -8216 -361  864 0
$p  16  1 POS -3622  14320 -8196  517  1651 0
$p  17  1 POS -5521  15005 -7248  1707  2842 0
$p  18  1 POS -1074  14320 -8184 -361  867 0
$p  19  1 $%^&$  4  6810 -5342 -340  333 0
$p  20  1 P -3622  14320 -8196  517  1651 0
$p  21  1 P -5521  15005 -7248  1707  2842 0
$p  22  1 P -1074  14320 -8184 -361  867 0
$p  23  1 T2 -3453  11696 -12615 -385  859 0
$p  24  1 T3 -3453  10778 -12284 -388  855 0
$p  25  1 $%^&$  4  13107 -9041 -203  71 0
$p  26  1 T -3453  12596 -12821 -385  861 0
$p  27  1 T -3453  11696 -12615 -385  859 0
$p  28  1 T -3453  10778 -12284 -388  855 0
$p  29  1 PI -11295  10922 -4963  50  1180 0
$p  30  1 NEXTP -3453  11696 -12615 -385  859 0
$p  1  2 00 0 0 0 0 0 0
$pr  1 E1V0
$pr  2 E1V1
$pr  3 APROX
$pr  4 SETUP
$pr  5 EMERG
$pr  6 E2V1
$pr  7 E2V2
$pr  8 EMER1
$pr  9 E3P1
$pr  10 E3P2
$pr  11 E3V1
$pr  12 E4P1
$pr  13 E4P2
$pr  14 E4P3
$pr  15 E4P4
$pr  16 E4V1
$par  1 -400  120  333 0 0  50  12  30
$par  9 0  44 0 0 0 0 0 0
$par  17 0 0 0 0  200  200  200  250
$par  25  250  180  700  700  700  700  700 0
$par  33  12770 -10216  10216  5022  5022 0 0 0
$par  41  250  250  250  300  300  500  500  500
$par  49  500  500  500 0  13653 -2867  1773 0
$par  57 0 0 0 0  1000  2500  2500  1200
$par  65  1200  1500  1200  1200  1200  1200  1200  1
$par  73  5400 0  3500  5 0  1  2 0
$par  81 0 0 0 0 0 0 0 0
$par  89 0 0 0 0  160  3490  2210  2210
$par  97  1450 0 0 0  24330  17160  21000  16000
$par  105  16000  32767  32767  32767  32767  32767  32767 0
$par  113 0 0 0 0 0 0 0 0
$par  121 -18830 -400 -32000 -16000 -16000 -32768 -32768 -32768
$par  129 -32768 -32768 -32768 0 0 0 0 0
$par  137 0 0 0 0  3000  3000  3000  3000
$par  145  3000  3000  16000  16000  16000  16000  16000 0
$par  153 0 0 0 0 0 0 0 0
$par  161  4500  4500  4500  4500  4500  4900  4500  4500
$par  169  4500  4500  4500 0 0 0 0 0
$par  177 0 0 0 0  5  5  3  5
$par  185  5  25  10  10  10  10  10 0
$par  193 0 0 0 0 0 0 0 0
$par  201  4500  4000  4000  4000  4000  4000  3000  3000
$par  209  3000  3000  3000 0 0 0 0 0
$par  217 0 0 0 0  4500  6000  6000  3000
$par  225  3000  6000  3000  3000  3000  3000  3000 0
$par  233 0 0 0 0 0 0 0 0
$par  241  24  24  30  24  24  12  5  5
$par  249  5  5  5 0 0 0 0 0
$par  257 0 0 0 0  20  20  20  20
$par  265  20  10  10  10  10  10  10  1
$par  273 0 0 0 0 0 0 0 0
$par  281  4600  4600  4000  4600  4600  4900  4000  4000
$par  289  4000  4000  4000 0 0  8000  50  40
$par  297  50  30  660  15 0 0 0 0
$par  305 0 0 0 0 0 0 0

                PROGRAM   E1V0
                *********************

SETP      POS[1]=P1A
SETP      POS[2]=P2A
SETP      POS[3]=P3A
SETP      POS[4]=P1
SETP      POS[5]=P2
SETP      POS[6]=P3
OPEN      
SPEED     30
MOVED     P0 
FOR       I = 1 TO 3
  MOVED     POS[I] 
  SPEED     10
  SET       J=I + 3
  MOVED     POS[J] 
  CLOSE     
  MOVED     POS[I] 
  SPEED     30
  SET       J=I - 1
  SET       J=J * 300
  SETP      NEXT=T1
  SHIFTC    NEXT BY Z  J
  SETP      APROX=NEXT
  SHIFTC    APROX BY Z  600
  MOVED     APROX 
  SPEED     10
  MOVED     NEXT 
  OPEN      
  MOVED     APROX 
  SPEED     30
ENDFOR
MOVED     P0 
END       

                PROGRAM   E1V1
                *********************

MOVE      P0 
FOR       I = 1 TO 3
  SETP      NEXT=P[I]
  GOSUB     APROX
  CLOSE     
  SETP      NEXT=T[I]
  GOSUB     APROX
  OPEN      
ENDFOR
MOVE      P0 
END       

                PROGRAM   APROX
                *********************

SPEED     10
HERE      APROX
SHIFTC    APROX BY Z  400
MOVED     APROX 
SPEED     30
SETP      APROX=NEXT
SHIFTC    APROX BY Z  400
MOVED     APROX 
SPEED     10
MOVED     NEXT 
END       

                PROGRAM   SETUP
                *********************

SPEED     30
MOVED     P0 
WAIT      IN[2] = 1
TRIGGER   E2V2 BY  IN 2 1
TRIGGER   EMER1 BY  IN 2 0
END       

                PROGRAM   EMERG
                *********************

STOP      E2V2
STOP      E2V2
IF        CERRA = 1
  END       

                PROGRAM   E2V1
                *********************

  END       

                PROGRAM   E2V2
                *********************

  MOVE      P0 
  OPEN      
  FOR       I = 1 TO 3
    SETP      NEXT=P[I]
    GOSUB     APROX
    CLOSE     
    SET       CERRA = 1
    SETP      NEXT=T[I]
    GOSUB     APROX
    OPEN      
    SET       CERRA = 0
  ENDFOR
  MOVE      P0 
  END       

                PROGRAM   EMER1
                *********************

  SUSPEND   E2V2
  IF        CERRA = 1
    MOVED     P0 
    SETP      NEXTP=NEXT
    SETP      NEXT=PI
    GOSUB     APROX
    OPEN      
    SETP      NEXT=NEXTP
    SET       POSIN = 1
    SET       CERRA = 0
  ELSE
    SET       POSIN = 0
    SET       CERRA = 0
  ENDIF
  MOVED     P0 
  WAIT      IN[2] = 1
  IF        POSIN = 1
    SETP      NEXTP=NEXT
    SETP      NEXT=PI
    MOVED     P0 
    GOSUB     APROX
    CLOSE     
    SETP      NEXT=NEXTP
    SET       CERRA = 1
    MOVED     P0 
    SET       POSIN = 0
  ENDIF
  CONTINUE  E2V2
  END       

                PROGRAM   E3P1
                *********************

WAIT IN[2] = 1
SET T_INI = TIME
WAIT IN[2] = 0
SET T_FIN = TIME
SET TP1A = T_FIN - T_INI
POST TP1A TO TP1

                PROGRAM   E3P2
                *********************

SET TP1 = 0
SPEED 30
MOVED POS1
PEND T FROM TP1
IF T > 300
  MOVED POS2 T
  MOVED POS1 T
ENDIF

                PROGRAM   E3V1
                *********************

RUN E3P1
RUN E3P2

                PROGRAM   E4P1
                *********************

DEFINE P_E4
LABEL 1
QPEND P_E4 FROM QUEUE
OPEN
IF P_E4 = 1
        SETP PNEXT = P[1]
ENDIF
IF P_E4 = 2
        SETP PNEXT = P[2]
ENDIF
IF P_E4 = 3
        SETP PNEXT = P[3]
ENDIF
GOSUB APROX
CLOSE
SHIFTC PNEXT BY Z 2000
MOVED PNEXT
SHIFTC PNEXT BY Z -2000
GOSUB APROX
OPEN
MOVED P0
GOTO 1
END

                PROGRAM   E4P2
                *********************

                PROGRAM   E4P3
                *********************

                PROGRAM   E4P4
                *********************

                PROGRAM   E4V1
                *********************
(END)
